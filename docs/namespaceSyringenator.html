<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Syringenator: Syringenator Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Syringenator
   </div>
   <div id="projectbrief">Software for the Syringenator robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Syringenator Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The top-level Pi program.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSyringenator_1_1Target.html">Target</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class to contain everything we know about an aquired target.  <a href="classSyringenator_1_1Target.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a263a26fdb4da94f277fb51f3e740f30d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a263a26fdb4da94f277fb51f3e740f30d">log</a> (arg)</td></tr>
<tr class="memdesc:a263a26fdb4da94f277fb51f3e740f30d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record system events for later analysis.  <a href="#a263a26fdb4da94f277fb51f3e740f30d">More...</a><br /></td></tr>
<tr class="separator:a263a26fdb4da94f277fb51f3e740f30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7978d5b84170226249d8de2e204e762"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#ae7978d5b84170226249d8de2e204e762">arduinoSend</a> (bytes)</td></tr>
<tr class="memdesc:ae7978d5b84170226249d8de2e204e762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send serial data to the arduino.  <a href="#ae7978d5b84170226249d8de2e204e762">More...</a><br /></td></tr>
<tr class="separator:ae7978d5b84170226249d8de2e204e762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5a8cf020e400c8c0337977a5b6d921"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a1c5a8cf020e400c8c0337977a5b6d921">arduinoReceive</a> ()</td></tr>
<tr class="memdesc:a1c5a8cf020e400c8c0337977a5b6d921"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait some fixed time for the arduino to send one or more bytes.  <a href="#a1c5a8cf020e400c8c0337977a5b6d921">More...</a><br /></td></tr>
<tr class="separator:a1c5a8cf020e400c8c0337977a5b6d921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff01237d3ff3e33f0ffc32927d813df0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#aff01237d3ff3e33f0ffc32927d813df0">scan</a> ()</td></tr>
<tr class="memdesc:aff01237d3ff3e33f0ffc32927d813df0"><td class="mdescLeft">&#160;</td><td class="mdescRight">A routine to take a picture and report back the closest target The Computer vision routine must be able to handle multiple targets in the image.  <a href="#aff01237d3ff3e33f0ffc32927d813df0">More...</a><br /></td></tr>
<tr class="separator:aff01237d3ff3e33f0ffc32927d813df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aecf5518c352d012eb1422d9970146d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a6aecf5518c352d012eb1422d9970146d">moveCloser</a> (t)</td></tr>
<tr class="memdesc:a6aecf5518c352d012eb1422d9970146d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the robot closer to the given target.  <a href="#a6aecf5518c352d012eb1422d9970146d">More...</a><br /></td></tr>
<tr class="separator:a6aecf5518c352d012eb1422d9970146d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9409dbfa8ede969288bb659ef23befb6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a9409dbfa8ede969288bb659ef23befb6">pickUp</a> (t)</td></tr>
<tr class="memdesc:a9409dbfa8ede969288bb659ef23befb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to pickup and dispose the target.  <a href="#a9409dbfa8ede969288bb659ef23befb6">More...</a><br /></td></tr>
<tr class="separator:a9409dbfa8ede969288bb659ef23befb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe04905c8a4a9d077457422866633203"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#afe04905c8a4a9d077457422866633203">returnToLine</a> ()</td></tr>
<tr class="memdesc:afe04905c8a4a9d077457422866633203"><td class="mdescLeft">&#160;</td><td class="mdescRight">signl the arduino to return to the line.  <a href="#afe04905c8a4a9d077457422866633203">More...</a><br /></td></tr>
<tr class="separator:afe04905c8a4a9d077457422866633203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824ef6e71bc0975483435ffbdd58cb3e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a824ef6e71bc0975483435ffbdd58cb3e">lineFollow</a> ()</td></tr>
<tr class="memdesc:a824ef6e71bc0975483435ffbdd58cb3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Follow the line.  <a href="#a824ef6e71bc0975483435ffbdd58cb3e">More...</a><br /></td></tr>
<tr class="separator:a824ef6e71bc0975483435ffbdd58cb3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb08d40f080a03cb4e7a43ee3ab4854b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#acb08d40f080a03cb4e7a43ee3ab4854b">canBePicked</a> (t)</td></tr>
<tr class="memdesc:acb08d40f080a03cb4e7a43ee3ab4854b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A routine to determine if the target is in position to be picked up.  <a href="#acb08d40f080a03cb4e7a43ee3ab4854b">More...</a><br /></td></tr>
<tr class="separator:acb08d40f080a03cb4e7a43ee3ab4854b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a161fa877b77c9ebb120c1ed20739260b"><td class="memItemLeft" align="right" valign="top"><a id="a161fa877b77c9ebb120c1ed20739260b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#a161fa877b77c9ebb120c1ed20739260b">onTheLine</a> = True</td></tr>
<tr class="memdesc:a161fa877b77c9ebb120c1ed20739260b"><td class="mdescLeft">&#160;</td><td class="mdescRight">boolean indicating whether we are on the line <br /></td></tr>
<tr class="separator:a161fa877b77c9ebb120c1ed20739260b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa574be83d026c46beac3e2391b26ffc6"><td class="memItemLeft" align="right" valign="top"><a id="aa574be83d026c46beac3e2391b26ffc6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSyringenator.html#aa574be83d026c46beac3e2391b26ffc6">target</a> = None</td></tr>
<tr class="memdesc:aa574be83d026c46beac3e2391b26ffc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The currently aquired target. <br /></td></tr>
<tr class="separator:aa574be83d026c46beac3e2391b26ffc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The top-level Pi program. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1c5a8cf020e400c8c0337977a5b6d921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5a8cf020e400c8c0337977a5b6d921">&#9670;&nbsp;</a></span>arduinoReceive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.arduinoReceive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait some fixed time for the arduino to send one or more bytes. </p>
<dl class="section return"><dt>Returns</dt><dd>a list of bytes </dd></dl>

</div>
</div>
<a id="ae7978d5b84170226249d8de2e204e762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7978d5b84170226249d8de2e204e762">&#9670;&nbsp;</a></span>arduinoSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.arduinoSend </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send serial data to the arduino. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>one or more bytes of data to send to the arduino </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="acb08d40f080a03cb4e7a43ee3ab4854b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb08d40f080a03cb4e7a43ee3ab4854b">&#9670;&nbsp;</a></span>canBePicked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.canBePicked </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A routine to determine if the target is in position to be picked up. </p>
<p>Calculates whether the center of the target bounding box is in the pickup area.</p>
<dl class="section return"><dt>Returns</dt><dd>a boolean </dd></dl>

</div>
</div>
<a id="a824ef6e71bc0975483435ffbdd58cb3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a824ef6e71bc0975483435ffbdd58cb3e">&#9670;&nbsp;</a></span>lineFollow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.lineFollow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Follow the line. </p>
<p>this routine simply signals the arduino to execute its <a class="el" href="namespaceSyringenator.html#a824ef6e71bc0975483435ffbdd58cb3e" title="Follow the line.">lineFollow()</a> routine</p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a263a26fdb4da94f277fb51f3e740f30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a263a26fdb4da94f277fb51f3e740f30d">&#9670;&nbsp;</a></span>log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.log </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record system events for later analysis. </p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a6aecf5518c352d012eb1422d9970146d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aecf5518c352d012eb1422d9970146d">&#9670;&nbsp;</a></span>moveCloser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.moveCloser </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move the robot closer to the given target. </p>
<p>The <a class="el" href="namespaceSyringenator.html#a6aecf5518c352d012eb1422d9970146d" title="Move the robot closer to the given target.">moveCloser()</a> routine attempts to aproach the target by relatively small increments. Because the move routines may be interrupted by the obstacle avoidance ISRs and the risk of jambing the wheels etc. we cannot expect to be able to approch successfully on the first try. Hence <a class="el" href="namespaceSyringenator.html#a6aecf5518c352d012eb1422d9970146d" title="Move the robot closer to the given target.">moveCloser()</a> should only move a relatively short distance before exiting to allow another loop through the scan cycle.</p>
<p>Should we spend effort trying to avoid running over decoys here?</p>
<p>This routine should check for ARDUINO_STATUS_OBSTACLE. then what?</p>
<p>This routine is likely where we will have the most issues. &ndash;ABD</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>a <a class="el" href="classSyringenator_1_1Target.html" title="A class to contain everything we know about an aquired target.">Target</a> object containing the location of the target to be approched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a9409dbfa8ede969288bb659ef23befb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9409dbfa8ede969288bb659ef23befb6">&#9670;&nbsp;</a></span>pickUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.pickUp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to pickup and dispose the target. </p>
<p>This routine must determine orientation of the target. If this is not done by some OpenCV magic we can attempt it here using the raw image data and the bounding box.</p>
<p>Divide the longer dimension of the bounding box by some constant divisor. Scan along each of those raster lines twice. On the first pass calculate an average brightness (RGB values can be summed). The second pass will pick out points of greatest brightness. Find the centers of clustered bright pixeles. We now have a set of points in cartesian space. Have Jake find the slope of the line of best fit.</p>
<p>The center can be estimated as the center of the bounding box, or the center of the points, the mean of both, etc.</p>
<p>Once the values for x, y, and m have been determined they will have to pass through a calibration transform to determine the arm a, r, o values. &ndash;ABD</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>a <a class="el" href="classSyringenator_1_1Target.html" title="A class to contain everything we know about an aquired target.">Target</a> object containing the raw bitmap data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="afe04905c8a4a9d077457422866633203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe04905c8a4a9d077457422866633203">&#9670;&nbsp;</a></span>returnToLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.returnToLine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>signl the arduino to return to the line. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>TODO: do we need to check that we actually returned? how do we recover if dead reckoning fails? &ndash;ABD</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="aff01237d3ff3e33f0ffc32927d813df0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff01237d3ff3e33f0ffc32927d813df0">&#9670;&nbsp;</a></span>scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Syringenator.scan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A routine to take a picture and report back the closest target The Computer vision routine must be able to handle multiple targets in the image. </p>
<p>It would be best if all targets are reported. Then this routine will determine the closest one to pursue. &ndash;ABD</p>
<dl class="section return"><dt>Returns</dt><dd>a target object </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
